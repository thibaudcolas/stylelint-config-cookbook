version: ~> 1.0
dist: bionic
language: node_js
install:
  - npm ci
script:
  # Test Git hooks in CI, to make sure script upgrades do not break them.
  - npm run prepare
  # Test commit message validation in CI.
  - git log -1 --pretty=%B >> latest.log && ./.git/hooks/commit-msg latest.log
  - npm run test:ci
  - npx commitlint-travis
  - if [ "$TRAVIS_SECURE_ENV_VARS" == true ]; then npx danger ci --verbose; fi
  - npm run report:package
branches:
  except:
    - gh-pages
notifications:
  email: false
deploy:
  provider: script
  skip_cleanup: true
  script: npx semantic-release
env:
  global:
    # travis encrypt --pro DANGER_JS_APP_INSTALL_ID=<value>
    - secure: "WAF3FGsKBq3PmeW9HIORt4dUzO74/GPE6pVaqcg1hpoYvf9vMj6oCsmzPH+arSy1rzRiLl8bYyzVzxctKR16PiZbErcQqVAo/T9WEzdfGMS7duzXt6kShNGvNtjx3VWfwU0vXgLxRejgsFcrH54d3I5fN0ayPfeeUSPSJuNU9DgJW2NzmFyvMK9CGYOwt1Nvme2OTYFM6FSkmNEe2Ckque3DQqMdokTiqWehMGzY5t/QakQqpo8iMUefv3N5Se0N32LI8fdaR6oFkClu4jZkC3RwqyuoEJGWzmdG4/gcrQz8NTe7JF6a+5MGqi9PwbIa+Q+ZE/8cgYWD8fnNOcNgMpJaxUYqFPFhaPPqXqVuKqh3weReYbfXnjPTpgQ6P66IphXgUMTXx79hQ161rhSfjl7j81wz7Fkx2xpTWhrujVkhPOwesJ+E1918pwoMK3L28EkkPjbEtSkfQuTSkuYT72CPWFVm8sIDNHmij1CSTcL2zVNiE7ea6zJNgJF6Ql6J8e+tzPj/K6UWLV3nCyKX0XrBdt5cuHn8mbvyRl0q6F/aEF6LUmBwfCz53aClX710RcnsSJJNvtQDpEFUiyXXNvKPlmuE+TVY4vbhwzatW7N3UZVP6OYrHRw0I2cmabuFl4W3MqZkvsIAblloavMCb2KUeGjV27dNmwS7wqsu/7o="
    # Permissions: public_repo
    # travis encrypt --pro DANGER_GITHUB_API_TOKEN=<value>
    - secure: "KxALArMy8eGPUj4pwNwo32iBD395i1Xpg89QZ0O+99x3517+0aVVEaNrlZVjb8DKoq6ri4VQJUTYCrHRU1gM3grUaPdWFhYIFJ9maC6XYrAuMjP4MWmsjJKzeAZoCtQacHrO1PHTvIFQe5Q76/v8Pu+YGmk9wuLVQS61fvE21AOzaXKiZ4O7w4qJIhzrWHwS4HL4eNy3050LlPTUdp5V/NVwMZca1mtyGgaCCKkGLJUmGFQkgdln8QKg4fJrVeR1ANlSb/CXgV5lA5z7zt6dEW/rL9jXK2GqcLdtXugKX498bIk1zC7ERqyRli171Pdby8AammKyVFQG4DQ12irYJ2/JHPSi8l2y0FJG08ziewl974UYPpTKwRkSIeRtDwZ9kJb8mE60AGK2+FmODJr+dqawEsOYIA4RJulxY6gZR8S/fNUxSK8v8xyZ9tgTDgCU7bc61PJufktMfjL7wvA+oippIwgEwi4vPOasVGdNKmaYg33WtdVmNhYBx5Os4cLv5stMBLpLWuWK7AUUXxWNZUm5Y/ch0SNufX2acKu0Q2pDjP13lZH5so3fWusHZXOnoMFO6I1rCGptC7CPFd91xdVN+/UHd06I2TgSNLScrmzgAreLLDujnNYB5D342N5uc8TOcNw3p/hKbCuc9tEPi4WZOn++wBDeiiNPbSKiJIY="
    # Permissions: public_repo
    # travis encrypt --pro GH_TOKEN=<value>
    - secure: "FTSIZJ5o+9sKEK+Bref6SaHOMeJAYqVdg0Y99u6eCqHeOE+sg4Z3wiLYDmMyDHvZZ2rcNtqyr3rj2wgsunbyH54w6w+xVu27/sHqD1mPJOvwS8AMvjzrPzWzZjl/N23AL349CMlfVEldQnDA+5B8SAZfVUsSHn92g/XW9CkmndpVy3knAauhVLwkFzkJatJSi7xXNYn/6IirezA7vDUqc4G5ygfvPlspnn9pZp4M2B5BMYC8qZHIrGVfs9tkQvZ7asYXPt1BcHn0QHd5HD0D6NGkYG7mhhfjxbuJcKuF2Tse7taEmT5SRtzc0tp+xJCgUPJH12B9xejkYgibQiO+xbtmiRxQHNovWm0GuZihgT6WJmMV5la52zj4u1zyXoevs+muEWCo3xrH7s3NuSrBY8W8KIfBFamxeHUWAugCnEOswdAXyqnMjfQGeuZ0CUJuwOGV+h3QBSafy/F/6lNXZCpchPXtWr3KCk2PRnXTCnDbTXHyE4VrAawVNrM5A5GoynvdyBU8LeOCLZ+4JmrvW/CT/yNzRVUV5/lUNxLzzPtgEpIJlDemfBHXPikByguTbfs3jDPZkRobMv9evWr6esLyhzvwKcqAm7e5oDoWBUzSME58Nq6ry0U1dVcuNolK4cZsM3F7gtsrPMkPFCajbV2rG0T4Xulud9lkKXp7OYI="
    # travis encrypt --pro GIT_AUTHOR_NAME=<value>
    - secure: "BV9lLqWO1Erp6ubQSlmoBlK2aoDrUe4SeN4J8mJAmAjC9Uofm67D2O45YiAVjKoU55ku/uf7Vo0bmfn/w3/wJVJmGsRnu9XkXx8D/0MoXWfyrkD5nAzUMolNUwInv2dNjmuDGK8baZ0BLC3IbjWGOZ1mOlv9+HRHb+zbtGNssa7WMKG9PRQd+6gQY/Wa/tyAzAV7oUwyq7EiY9+HHOL5I5OzC37MTjNpuCkCjhXmH++VDolgFkyJHCDrieLDGAhIy14btEcsbpIVHUf/dyS8pSmsSqn/AEQ57z/aKGD8dD9HvU4ZkLxBvYtg/iNei3JFDdkzEHbrdWy5BhJLFEoo3WYN0jjLt8ePhVK0bGM+lHz0Lq+GHUK+MaCrFwhr9ATyr8//qWhC6VolR16VQhPrBII3VZ1TuSvpJQRtTFIIpQKXz/e5hgXgO1gqs34A36S1kiXhT7CkP8JTFDIhG07T/o/ovQF8HLRG8R9hEY7lUAGU6Wqxj3IN2JyhMJCbA6edyW+ek2YuBIkw6EnkgZzhTmqR0irY0M+Mop8KBIVHvT6OdNttpGL0ZVxXzfELZQOz97Ej5jI69PbjYpnpNla3qOvcx1vEpkJErDyWVZRR/h2Y5AsP+Bj2Ld2UZvvZSz1QQcNL7AUeDzFSg+tti+sfbprG12acKKDkfsr9TeCIxzc="
    # travis encrypt --pro GIT_AUTHOR_EMAIL=<value>
    - secure: "CX1oULDEVSQ+2GubmVRVHHho3ASUgl/RQEU7bYgzcgHlNamkgE3EqHXTWsBpkVfVLe2Dniv4ddBq45DKBALZkXIhAdjfQeMvw6wd2ucT1a+Gv1XjrhY7G9NRD2d/xfJla+8AO4j4NpRcGen1RmZ7i5elKgwlb2Ju/LtBc3L2sW7T/7/wgmyImOxhCv7sfJ1VZWQqCQj05vwPFxVrm+8PLFrchOcwryvNrWLaTvZ0NdONAdH7UCxpQ73IAsWCkRUfMtKQTmv3OaYK1Jh+OXW6T8ac2O/HvSm/Hfe+JVvk28ZWMQ13a2PwsdybEDOkayIXfRK45cwznDgIVDw3XGOrSPr1ishpc6/rzZ5z6ScZixGuy+PsnFl4jwRxN6hNtRGi4muhM5619i+GiZsjXvcjE4GTFUGNEq0+Fh1gohBI/o/UvkTVdkghlQLpvqKuxJD9n0dujUqCMAkBw6E7rqBL4yHqGGC7crU42YK71NO9XKFPFI2sQkPioKszwPAvhGAJiv3NpnVg0nhxjn6un7ptSY0ASL46RQb7nUxAHLmD+jlq3zDoSoA+ZkcBQ5wlr6zCMrrP8DCyaFNrnPTHkgo7mjyS55DsGyszsmyo3o8ovU3zS+W3fBzcBPaDgZDtvqgkFbjC58LR41bjo9M8tFiH414BFhAVPifBevPxYQO9w/c="
    # travis encrypt --pro NPM_TOKEN=<value>
    - secure: "nmir/VgQZQ+dGuRT2pAy0GIFjRX6TrsrOeCmxbU+Cnkm+eLTcN7R67uoo6TAStGoKAoHUxe1gBkH67B6BKgdmOMwLDu4aCZe1zkC/PZ6qOgCp5uE9ufNLiulyTDh3QmKVU6gg3gkwCNKlSBlw48Yc2/I57LQxmetm5fVWWULDcGWNNePfEGBYthClP9opdKOkMQHfA+AcHwmPemPRbxunWBG4QVBhfo92wRlU99tvWlmTPkwKX0s3+wtQ1lcK3WAKFQ19hGHDYHSZ5XkGjVjFKtCJ0nr2kdd0iiGL8TtfX0A1eBrz1EV0wX1lRsA03chezSk29FSWLoX/4ySmXxYfztfniJ4W/6g7efLCCjQuq9gYShdm9CHzKzM93ZUCbEo/W2oTILTMT/fyZW5Kx0ikKTEU2V+A4J+23krV+oVlvLWlL5HokqR4tNyKheBHD9zdMNr/DMo3SV+gPXelVQp8U6C3ruHotqh2WDHLQLi7Dx/qfhN2KBiDOYbKsNRUdCrHPXo9p87sYCUjvTsjhymsj00q91O2MBBTtwROOEKffMTB0sKcEQ2HKvOhFJmjKcezdYHhBsbI4AysDW0n/fvqheVve/pG43HCxmB1VboGXKongYRS8Slfbk0nbmlF2FvV1OEpm9yNyC0VVOVjtO1E8b5JOypLnOezl5saGpW58Y="
